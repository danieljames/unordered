# Copyright (C) 2005-2008 Daniel James.
# Distributed under the Boost Software License, Version 1.0. (See accompanying
# file LICENSE_1_0.txt or copy at http://www.boost.org/LICENSE_1_0.txt)

# Very simple test runner using Ubuntu's copy of Boost, rather than downloading
# our own copy. Probably not appropriate for most libraries as they'll
# require a more recent version.

# Use Trusty to get a reasonably recent version of Boost.
sudo: required
dist: trusty

language: c++

# Install Boost
addons:
    apt:
        packages:
            - libboost-dev
            - libboost-tools-dev

# Test using default GCC + default GCC in C++11 mode.
# Note: To use other compilers will need to tweak user-config.jam below.
matrix:
    include:
      - compiler: gcc
        env:
          - BJAM_COMPILER=gcc-4.8
      - compiler: gcc
        env:
          - BJAM_COMPILER=gcc-4.8x
      - compiler: clang
        env:
          - BJAM_COMPILER=clang-3.4
      - compiler: clang
        env:
          - BJAM_COMPILER=clang-3.4x

# Run the tests.
script:
    - 'echo "using gcc : 4.8 : g++-4.8 ;" > ~/user-config.jam'
    - 'echo "using gcc : 4.8x : g++-4.8 --std=c++11 ;" >> ~/user-config.jam'
    - 'echo "using clang : 3.4 : clang++ ;" >> ~/user-config.jam'
    - 'echo "using clang : 3.4x : clang++ --std=c++11 ;" >> ~/user-config.jam'
    - cat ~/user-config.jam
    - touch Jamroot.jam
    - cd test && bjam -q ${BJAM_COMPILER} include=${TRAVIS_BUILD_DIR}/include
